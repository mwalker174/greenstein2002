#PBS -S /bin/bash
#PBS -o output-fileSampleOutput_AP_1Hz_Original_withVPPChanges
#PBS -j oe
#PBS -m ae
#PBS -M yhasham2@jhmi.edu
#PBS -l nodes=2:ppn=8
#PBS -l walltime=24:00:00

# load the modules
. /etc/profile.modules
module load openmpi/openmpi-1.3.2-intel intel/intel-icc-ifort-Compiler-11.083

MPI_DIR=/apps/openmpi-1.3.2/bin

WORK_DIR=/home/yhasham/Original_MPI_stoch_canine_Model/MPI_stoch_canine_withVPPclampChanges
EXECUTABLE=./stoch

cd $WORK_DIR
make cleanall;
make;

echo pbs nodefile:
cat $PBS_NODEFILE
NPROCS=`wc -l < $PBS_NODEFILE`
cat $PBS_NODEFILE > host.list

date
time $MPI_DIR/mpirun --mca btl openib,self -np $NPROCS -hostfile host.list $EXECUTABLE
date


